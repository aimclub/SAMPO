# Связи между работами

## Термины

**Связь (GraphEdge)** — направленное ребро между узлами с типом (`EdgeType`) и лагом.
> Определяет правило допуска старта/финиша зависимой работы.

**Лаг (lag)** — числовая задержка после финиша родителя перед тем, как зависимая работа может стартовать.
> Используется для технологических выдержек (сушка, остывание и т.п.).

**IFS‑цепочка** — последовательность узлов, связанных типом IFS без пауз и без освобождения команды.
> Выполняется непрерывно одной бригадой.

---

## Типы связей (EdgeType)

| Тип | Формат                 | Семантика (кратко)                            | Блокирует старт?                    |
|-----|------------------------|-----------------------------------------------|-------------------------------------|
| FS  | Finish→Start           | Потомок стартует после финиша родителя (+лаг) | Да                                  |
| FFS | LagFinishStart         | То же, акцент на обязательном лаге            | Да                                  |
| IFS | InseparableFinishStart | Неразрывная передача выполнения (цепочка)     | Да                                  |
| SS  | Start→Start            | Синхронный старт с родителем                  | Нет (не родитель в смысле задержки) |
| FF  | Finish→Finish          | Должен закончиться не раньше связанного узла  | Нет (контролируется по финишу)      |

> В вычислении раннего старта участвуют только FS / FFS / IFS (они считаются «жёсткими» зависимостями).

---

## Когда использовать

- Обычная последовательность: **FS**.
- Технологическая выдержка: **FFS** (или FS с лагом, если семантика очевидна).
- Неразрывный проход одной командой: **IFS**.
- Одновременный запуск: **SS**.
- Синхронный (или не ранний) общий финиш: **FF**.

---

## Формулировки типов (единообразно)

- **FS** — B стартует после финиша A (можно добавить лаг).
- **FFS** — B стартует после финиша A с обязательной задержкой (лаг критичен).
- **IFS** — B немедленно следует за A теми же ресурсами (без интервала).
- **SS** — B может начинаться одновременно с A.
- **FF** — B должен завершиться не раньше A (контроль на уровне финиша).

---

## Мини‑примеры

1. FS + лаг  
   A: «Залить бетон» (финиш День 2) → лаг 3 дня → B: «Кладка стен» (старт не раньше День 5).

2. IFS  
   A: «Сверление» ⇒ B: «Анкерение» ⇒ C: «Монтаж стойки» (одна бригада без пауз).

3. SS  
   A: «Пуск серверов» ≡ B: «Старт мониторинга» (одновременно).

4. FF  
   A: «Основная настройка» || B: «Документация» (должны завершиться к одному дедлайну).

5. FFS  
   A: «Нанести грунт» → лаг 4 часа → B: «Покраска».

> Условные символы выше: → (FS/FFS), ⇒ (IFS), ≡ (SS), || (FF).

---

## Мини CSV (логика экспорта зависимостей)

Формат (условный `predecessors.csv`):

```
child_id,parent_id,type,lag
B,A,FS,3
C,B,IFS,0
D,C,IFS,0
E,A,SS,0
```

Расшифровка:

- B после A + 3 (сушка, лаг 3).
- C и D образуют с B неразрывную цепь (IFS).
- E стартует синхронно с A (SS, не задерживает A и не задерживается им).

> В итоговой таблице проекта сервисные `start` / `finish` не выводятся.

---

