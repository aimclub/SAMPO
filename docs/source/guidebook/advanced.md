## Расширённое использование и настройка

После базового знакомства вы можете тонко настроить SAMPO: выбирать алгоритмы, тюнить параметры, работать с несколькими критериями и встраивать доменные компоненты.

### Как выбрать алгоритм

* **Эвристики (HEFT, Topological)** — быстрые, дают хорошую базу. HEFT/HEFTBetween используют критические пути/приоритеты.
* **Генетический алгоритм** — исследует больше вариантов и часто находит лучше, но дольше считает. Настраиваются `population_size`, `iterations`, `mutate_order`, `mutate_resources` и др.:

  ```python
  from sampo.scheduler.genetic import GeneticScheduler
  scheduler = GeneticScheduler(population_size=100, iterations=50, mutate_order=0.1, mutate_resources=0.1)
  ```
* **Многоагентное планирование** — делит граф на блоки, применяет разные стратегии и объединяет результат. Полезно для очень больших проектов и гибридных стратегий; требует большего сетапа (`sampo.scheduler.multi_agency`).

**Практика:** начните с эвристики для быстрого ответа, затем при необходимости примените GeneticScheduler и сравните качества планов.

### Кастомизация конвейера и ограничений

`SchedulingPipeline` упрощает код и допускает расширения. Можно добавлять собственные шаги (пред-/пост-обработку), комбинировать несколько алгоритмов (напр., «черновик HEFT → доулучшение Genetic»).

Дополнительные **ограничения** (напр., запрет параллельности для двух конкретных задач, смены/простой оборудования) можно:

* Заложить в граф (добавить зависимости, объединить узлы).
* Учесть пост-обработкой расписания.
* Внедрить в сам алгоритм (напр., штрафы в fitness-функции у генетики или проверки допустимости).

### Мультикритериальная оптимизация

Цель может быть не одна: **время** и **стоимость** одновременно. Подходы:

* **Отдельные прогоны по разным метрикам** и сравнение результатов.
* **Собственная целевая функция/веса** (часто — модификация генетики), либо режим Парето, если доступен. Итог — набор компромиссных планов (Парето-фронт).

Важно определить метрики и подготовить данные (стоимости, дедлайны) заранее.

### Интеграция с вашими данными и системами

* **Парсеры входа**: читайте CSV/БД/MS Project и формируйте `WorkGraph`/`Contractor` своими скриптами.
* **Модели оценки времени/ресурсов**: можно подключать внешние модели (в т. ч. ML) и итеративно уточнять длительности («план → симуляция → корректировка → перепланирование»).
* **Вывод/визуализация**: экспорт расписания в JSON/CSV, построение диаграмм Ганта сторонними средствами и т. п.

Во многих случаях достаточно грамотной сборки существующих компонентов без правок ядра. Если же нужно «что-то новое» — см. раздел для разработчиков.
