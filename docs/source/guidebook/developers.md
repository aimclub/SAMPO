## Для разработчиков: расширение и модификация SAMPO

Ниже — обзор архитектуры и путей расширения для **power-пользователей и контрибьюторов**.

*Высокоуровневая архитектура SAMPO. Два основных подхода: конкретный алгоритм планирования и многоагентная стратегия (разбиение на подзадачи и последующее объединение).*

### Обзор архитектуры

* **Схемы данных** (`sampo.schemas`): **WorkGraph**, **WorkUnit**, **Contractor/Worker**, **Schedule** — вход/выход алгоритмов.
* **Алгоритмы планирования** (`sampo.scheduler`):

  * `heft` — HEFTScheduler и варианты.
  * `topological` — TopologicalScheduler.
  * `genetic` — GeneticScheduler (+ структуры хромосом, мутации и пр.).
  * `multi_agency` — многоагентное планирование (генерация блоков, координация).
  * Вспомогательные подсистемы (таймлайн, учёт ресурсов и пр.).
* **Конвейер и утилиты**: `sampo.pipeline`, генераторы синтетики (`sampo.generator`), вспомогательные инструменты.

Дизайн **модульный**: новые алгоритмы реализуют общий интерфейс (`schedule(work_graph, contractors)`).

### Добавление нового планировщика

1. **Создайте класс** (напр., `MyScheduler`) и реализуйте `schedule(self, work_graph, contractors)`.
2. **Переиспользуйте** имеющиеся утилиты (проверки допустимости назначения, управление ресурсами).
3. **Интегрируйте в pipeline** — как правило, достаточно передать экземпляр в `.schedule(...)`.

Лицензия BSD-3 позволяет свободно модифицировать. Для PR — тесты, документация, внятные коммиты.

### Расширение ограничений

Примеры:

* Запрет параллельности двух задач — добавьте фиктивное предшествование в граф или проверку в планировщике.
* Смены/простои — расширьте `WorkUnit`/`Worker` доп. полями и учитывайте их в логике планирования.

Рекомендуется ознакомиться с кодом простого планировщика (напр., Topological/HEFT), чтобы понять точки встраивания правил.

### Многоагентные и гибридные стратегии

Посмотрите `sampo.scheduler.multi_agency`: как генерируются блоки (`block_generator`), как объединяются результаты. Можно экспериментировать с разными стратегиями разбиения и координации агентов (напр., критический путь — генетика; периферия — эвристика).

### Вклад в проект

* Ищите `CONTRIBUTING.md`/гайдлайны в репозитории.
* Пишите тесты, документируйте, открывайте PR с мотивацией изменений.
* Следите за релиз-нотами/вики/ReadTheDocs.

---

Надеемся, это руководство дало вам понятный путь от базового знакомства до глубокой работы с SAMPO. Хотите просто получить план? Нужны тонкие настройки качества? Планируете расширять ядро? — SAMPO предоставляет мощную платформу для адаптивного календарного планирования. Удачи!
