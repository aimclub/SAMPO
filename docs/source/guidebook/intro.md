# Руководство SAMPO

## Для кого руководство?

Руководство организовано так, чтобы помочь пользователям с разным уровнем подготовки:

* **Базовый уровень** — что такое SAMPO, чем он поможет и как быстро начать работу.
* **Средний уровень** — как настраивать SAMPO под свои задачи.
* **Продвинутый уровень** — как модифицировать и расширять фреймворк.

## Введение

### Что такое SAMPO?

**SAMPO** (Scheduler for Adaptive Manufacturing Processes Optimization) — это открытый **фреймворк адаптивного
календарного планирования** для производства и других областей.

> **Адаптивное календарное планирование** — построение расписания с учётом ограничений и его автоматическое
> пересчитывание при изменениях (задержках, изменении ресурсов, приоритетов или сроков).

Он автоматически упорядочивает **задачи** и назначает им **ресурсы** (людей, оборудование и т. п.) оптимальным образом с
учётом ограничений проекта (зависимости, лимиты ресурсов, дедлайны). Цель — построение расписания, наилучшего по
выбранной **метрике оптимизации** (например, минимизация длительности или стоимости).

В SAMPO реализованы **эвристики**, **генетические алгоритмы** и **многоагентные методы**, а также их комбинации, что
позволяет эффективно решать сложные реальные сценарии, где статические или жадные подходы недостаточны. Фреймворк
поддерживает **реактивное перепланирование** при изменениях и возмущениях в ходе выполнения проекта.

### Для кого SAMPO?

Если у вас проект с множеством зависимостей и ограничений по ресурсам, и вы хотите автоматизировать поиск хорошего плана
исполнения — SAMPO для вас.

### Ключевые возможности и преимущества

* **Многокритериальная оптимизация**  
  — работа сразу с несколькими целями: минимизация длительности и стоимости, сокращение просрочек, балансировка
  загрузки, приоритизация заказов; поддержка поиска **Парето-компромиссов** и гибкой агрегации метрик.

> **Парето-компромисс** — решение, где нельзя улучшить одну цель без ухудшения другой; множество таких решений образует
> фронт Парето.

* **Сложные ограничения и ресурсы**  
  — учёт предшествования и альтернативных маршрутов, параллельных/альтернативных ресурсов, сменных календарей,
  навыков/квалификаций (skills), окон доступности, ограничений мощностей, переналадок/переконфигураций и логистических
  задержек.

* **Поддерживаемые модели задач**  
  — RCPSP/MRCPSP (в том числе многопроектное планирование), варианты *Job Shop*, *Flow Shop* и DAG-ориентированные
  процессы.

  > **RCPSP** — задача календарного планирования с ограниченными ресурсами.

  > **MRCPSP** — расширение RCPSP, где для каждой работы есть несколько способов выполнения с разными
  ресурсами/длительностью.

  > **Job Shop / Flow Shop** — классические производственные модели: порядок и маршруты задач фиксированы (*Flow Shop*)
  или различаются для каждого изделия (*Job Shop*).

  > **DAG-процессы** — планирование по ацикличным графам зависимостей (Directed Acyclic Graph).

* **Гибкий конвейер (pipeline)**  
  — модульное подключение планировщиков; легко заменить алгоритм или добавить шаги без правок ядра.

* **Адаптивность и реактивное планирование**  
  — пересчёт расписания при изменении входных данных (WorkGraph, ресурсы Contractor, дедлайны, веса критериев) за счёт
  модульного SchedulingPipeline (пайплайн построен из независимых, заменяемых шагов) и настраиваемых оценщиков
  времени/ресурсов. Поддерживается автоматическое перепланирование «на лету» при задержках, сбоях, изменении ресурсов,
  приоритетов или поступлении новых работ.

* **Масштабируемость**  
  — устойчив к крупным графам (порядка **2 000–10 000** работ) при поиске качественных решений.

* **Адаптация под домен**  
  — возможность подключать свои парсеры, модели оценки времени/ресурсов, критерии качества и политики диспетчеризации.

* **Инструментарий**  
  — генерация и бенчмаркинг тестовых данных, средства анализа качества решений, утилиты визуализации (диаграммы Ганта,
  загрузка ресурсов).

  > **Диаграмма Ганта** — график, где работы показываются полосами на временной шкале, отражающими их начало и
  длительность.

* **Открытость и документация**  
  — лицензия **BSD 3-Clause**, подробная документация, примеры в **Jupyter Notebook**, удобный **Python API**.

  > BSD 3-Clause — свободная лицензия, разрешающая использовать, изменять и распространять код (в том числе в
  коммерческих проектах) при сохранении уведомления об авторских правах и отказа от ответственности.

---

### Реализованные алгоритмы и подходы

* **Эвристики**

  > Эвристики — упрощённые правила «разумного выбора», дающие быстрое приближённое решение.

    - *Topological* — алгоритм, который строит порядок выполнения задач на основе их зависимостей. Использует
      топологическую сортировку графа работ (DAG), то есть размещает каждую задачу только после всех её
      предшественников.
  
    - *HEFT/HEFTBetween* — жадные эвристики *Heterogeneous Earliest Finish Time*, минимизирующие время завершения.

  > HEFT/HEFTBetween — метод планирования, который идёт по задачам и назначает каждую туда, где она закончится
  быстрее всего, учитывая зависимости и разную скорость ресурсов.

* **Генетические алгоритмы**

  > Генетические алгоритмы — оптимизация по принципам эволюции: популяция решений подвергается «скрещиванию» и
  «мутациям» для улучшения качества.

    - *Genetic* — алгоритм с эвристической инициализацией, кроссовером и мутациями.

  > Позволяет находить более качественные планы, чем простые жадные методы, так как исследует разные комбинации решений.

  > Жадные методы — алгоритмы, которые на каждом шаге выбирают локально «лучшее» решение (например, самую короткую
  задачу или ресурс с наименьшей загрузкой), не анализируя последствия для всего расписания.

* **Многоагентные методы**

  > Многоагентные методы — решение задач группой независимых планировщиков, каждый из которых отвечает за свою часть
  проекта.

    - *Многоагентное планирование* — разбиение проекта на подзадачи и координация агентов.  
